import{h as k,t as P,n as x,m as $,j as A,r as V,k as j,d as c,aI as M,aK as N,aj as w,q as S,s as z,a8 as E,v as K,x as U,A as q,z as D,aL as F,I as L,O as Y,a as Z,c as G,w as _,f as I,e as B,i as H}from"./index-ea8e790e.js";import{u as J}from"./use-placeholder-a0372669.js";import{r as Q,u as W}from"./index-af3b5cf1.js";const[T,C]=k("tabbar"),X={route:Boolean,fixed:P,border:P,zIndex:x,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:$(0),safeAreaInsetBottom:{type:Boolean,default:null}},O=Symbol(T);var ee=A({name:T,props:X,emits:["change","update:modelValue"],setup(e,{emit:i,slots:a}){const m=V(),{linkChildren:l}=j(O),r=J(m,C),u=()=>{var n;return(n=e.safeAreaInsetBottom)!=null?n:e.fixed},t=()=>{var n;const{fixed:o,zIndex:s,border:b}=e;return c("div",{ref:m,role:"tablist",style:M(s),class:[C({fixed:o}),{[N]:b,"van-safe-area-bottom":u()}]},[(n=a.default)==null?void 0:n.call(a)])};return l({props:e,setActive:(n,o)=>{w(e.beforeChange,{args:[n],done(){i("update:modelValue",n),i("change",n),o()}})}}),()=>e.fixed&&e.placeholder?r(t):t()}});const ae=S(ee),[te,h]=k("tabbar-item"),ne=z({},Q,{dot:Boolean,icon:String,name:x,badge:x,badgeProps:Object,iconPrefix:String});var oe=A({name:te,props:ne,emits:["click"],setup(e,{emit:i,slots:a}){const m=W(),l=E().proxy,{parent:r,index:u}=K(O);if(!r)return;const t=U(()=>{var o;const{route:s,modelValue:b}=r.props;if(s&&"$route"in l){const{$route:v}=l,{to:f}=e,d=F(f)?f:{path:f};return!!v.matched.find(g=>{const y="path"in d&&d.path===g.path,R="name"in d&&d.name===g.name;return y||R})}return((o=e.name)!=null?o:u.value)===b}),p=o=>{var s;t.value||r.setActive((s=e.name)!=null?s:u.value,m),i("click",o)},n=()=>{if(a.icon)return a.icon({active:t.value});if(e.icon)return c(L,{name:e.icon,classPrefix:e.iconPrefix},null)};return()=>{var o;const{dot:s,badge:b}=e,{activeColor:v,inactiveColor:f}=r.props,d=t.value?v:f;return c("div",{role:"tab",class:h({active:t.value}),style:{color:d},tabindex:0,"aria-selected":t.value,onClick:p},[c(q,D({dot:s,class:h("icon"),content:b},e.badgeProps),{default:n}),c("div",{class:h("text")},[(o=a.default)==null?void 0:o.call(a,{active:t.value})])])}}});const re=S(oe);const se={class:"custom-tab-bar"},ue={__name:"index",setup(e){const i=Y(),a=V(0);return(m,l)=>{const r=re,u=ae;return Z(),G("div",se,[c(u,{route:"",modelValue:B(a),"onUpdate:modelValue":l[0]||(l[0]=t=>H(a)?a.value=t:null),placeholder:"","safe-area-inset-bottom":""},{default:_(()=>[c(r,{to:"/index",replace:"",icon:"home-o"},{default:_(()=>[I("首页")]),_:1}),c(r,{to:"/message",replace:"",icon:"chat-o",badge:B(i).unReadMsg},{default:_(()=>[I(" 消息 ")]),_:1},8,["badge"])]),_:1},8,["modelValue"])])}}};export{ue as _};
